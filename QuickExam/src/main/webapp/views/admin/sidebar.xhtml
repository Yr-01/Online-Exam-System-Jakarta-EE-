<!DOCTYPE html>
<html lang="en"
      xmlns:h="jakarta.faces.html"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core">
<h:head>
    <title><ui:insert name="title">Admin Panel</ui:insert></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <h:outputStylesheet library="css" name="sidebar.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
</h:head>

<h:body class="bg-white text-gray-800">
    <div class="flex min-h-screen">
        <!-- SIDEBAR -->
        <aside id="sidebar" class="flex-shrink-0">
            <div class="p-6 flex flex-col h-full sidebar-content">
                <!-- HEADER: Logo + Title + Toggle (all in one row) -->
                <div class="flex items-center mb-10">
                    <div class="flex items-center gap-1 header-inner flex-1">
                        <!-- Logo -->
                        <div class="w-14 h-14 rounded-lg flex items-center justify-center font-bold text-xl flex-shrink-0">
                            <h:graphicImage library="logo" name="icon.png"/>
                        </div>
                        <!-- Title -->
                        <h2 class="sidebar-title text-xl font-bold text-violet-700 whitespace-nowrap">
                            Admin Panel
                        </h2>
                    </div>

                    <!-- Toggle Button - always on far right -->
                    <button type="button" id="toggleSidebar" class="toggle-btn">
                        <svg id="expandIcon" class="w-6 h-6 text-violet-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                        <svg id="collapseIcon" class="w-6 h-6 text-violet-700 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                </div>

                <!-- MAIN NAVIGATION -->
                <nav class="flex-1 space-y-2">
                    <h:form>

                        <h:commandLink action="#{homeController.goToHome()}"
                                       styleClass="nav-item exit-dashboard-btn">
                            <i class="fas fa-arrow-left exit-icon"></i>
                            <div class="nav-text">
                                <span class="font-medium">Exit Dashboard</span>
                                <span class="block text-xs">Return to Home</span>
                            </div>
                        </h:commandLink>

                        <h:commandLink action="#{homeController.dashboard()}"
                                styleClass="nav-item #{view.viewId.contains('dashboard') ? 'active' : ''}">
                            <svg class="text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M3 9.75L12 3l9 6.75V20a1 1 0 01-1 1h-5a1 1 0 01-1-1v-4H10v4a1 1 0 01-1 1H4a1 1 0 01-1-1V9.75z"/>
                            </svg>
                            <div class="nav-text">
                                <span class="font-medium">Home Dashboard</span>
                                <span class="block text-xs text-gray-500">Overview &amp; insights</span>
                            </div>
                        </h:commandLink>


                        <h:commandLink action="#{examController.goToMyExams()}"
                                       styleClass="nav-item #{view.viewId.contains('my-exams') ? 'active' : ''}">
                            <svg class="text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5l5 5v11a2 2 0 01-2 2z"/>
                            </svg>
                            <div class="nav-text">
                                <span class="font-medium">My Exams</span>
                                <span class="block text-xs text-gray-500">Manage &amp; create exams</span>
                            </div>
                        </h:commandLink>

                        <h:commandLink action="#{examController.viewExamSession()}"
                                       styleClass="nav-item #{view.viewId.contains('exam-session') ? 'active' : ''}">
                            <svg class="text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div class="nav-text">
                                <span class="font-medium">Sessions</span>
                                <span class="block text-xs text-gray-500">Exam history &amp; stats</span>
                            </div>
                        </h:commandLink>

                        <h:commandLink action="#{adminController.creators()}"
                                       styleClass="nav-item #{view.viewId.contains('creators') ? 'active' : ''}">
                            <svg class="text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4a4 4 0 110 8 4 4 0 010-8zM4 20a8 8 0 0116 0"/>
                            </svg>
                            <div class="nav-text">
                                <span class="font-medium">Creators</span>
                                <span class="block text-xs text-gray-500">User requests</span>
                            </div>
                        </h:commandLink>
                    </h:form>
                </nav>

                <div class="profile-section space-y-2">
                    <h:form>
                        <h:commandLink action="#{adminController.profile()}"
                                       styleClass="nav-item #{view.viewId.contains('profile') ? 'active' : ''}">
                            <svg class="text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            <div class="nav-text">
                                <span class="font-medium">My Profile</span>
                                <span class="block text-xs text-gray-500">Account settings</span>
                            </div>
                        </h:commandLink>
                    </h:form>

                    <!-- Divider -->
                    <div class="border-t border-gray-200 my-2"></div>

                    <!-- Logout Button -->
                    <h:form>
                        <h:commandLink action="#{authController.logout()}"
                                       styleClass="nav-item logout-btn bg-rose-100 hover:bg-red-500 hover:text-white-700"
                                       onclick="return confirm('Are you sure you want to logout?');">
                            <svg class="text-rose-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                            </svg>
                            <div class="nav-text">
                                <span class="font-medium text-rose-600">Logout</span>
                                <span class="block text-xs text-rose-500 ">Sign out of your account</span>
                            </div>
                        </h:commandLink>
                    </h:form>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="flex-1 p-10">
            <ui:insert name="content">
                <div class="text-center py-20">
                    <p class="text-gray-500 text-lg">Welcome to the Admin Panel</p>
                </div>
            </ui:insert>
        </main>
    </div>

    <!-- Toggle Script -->
    <script>
        document.getElementById('toggleSidebar').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            const title = document.querySelector('.sidebar-title');
            const texts = document.querySelectorAll('.nav-text');
            const expand = document.getElementById('expandIcon');
            const collapse = document.getElementById('collapseIcon');

            sidebar.classList.toggle('collapsed');

            title.classList.toggle('hidden');
            texts.forEach(t => t.classList.toggle('hidden'));
            expand.classList.toggle('hidden');
            collapse.classList.toggle('hidden');
        });
    </script>
</h:body>
</html>